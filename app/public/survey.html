<!DOCTYPE html>

<html>

	<title> Friend Finder Survey </title>

	<head>

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

	</head>

	<style>
		img {
			width: 300px;
			height: 300px;
		}

		#postAjax {
			text-align: center;
			font-size: 25px;
			font-weight: bold;
		}
	
	</style>

	<body>

		<div class = "container">

			<div class = "jumbotron">

			<div class="well">
				<div class ="form-group">
					<label for = "name">Name (Required): </label>
						<input class ="form-control" id = "name"></input>

					<label for = "photoID">Link to Photo Image (Required): </label>
						<input class ="form-control" id ="photoID"></input>
				</div>	
			</div>
			
				<div class="btn-group">
				  	<a href="/"> <button id="surveyBTN" type="button" class="btn btn-info dropdown-toggle">Back</button></a>
					
				</div>
			</div>

			<div class="well">
			   <h3> Question 1 </h3>
				<h5> Do you get energized when being social or find yourself wiped out?</h5>

					<select class="form-control" id="Q1">
					    <option id="placeholder" value="none">Select Rating </option>
					    <option value=1>1 Strongly Disagree</option>
					    <option value=2>2</option>
					    <option value=3>3</option>
					    <option value=4>4</option>
					    <option value=5>5 Strongly Agree</option>
			
					</select>
			</div>
			<div class="well">
			   <h3> Question 2 </h3>
				<h5> Question 2 goes here</h5>

					<select class="form-control" id=Q2>
					    <option id="placeholder" value="none">Select Rating </option>
					    <option value=1>1 Strongly Disagree</option>
					    <option value=2>2</option>
					    <option value=3>3</option>
					    <option value=4>4</option>
					    <option value=5>5 Strongly Agree</option>
			
					</select>
			</div>
			<div class="well">
			   <h3> Question 3 </h3>
				<h5> Question 3 goes here</h5>

					<select class="form-control" id=Q3>
					    <option id="placeholder" value="none">Select Rating </option>
					   	<option value=1>1 Strongly Disagree</option>
					    <option value=2>2</option>
					    <option value=3>3</option>
					    <option value=4>4</option>
					    <option value=5>5 Strongly Agree</option>
			
					</select>
			</div>
			<div class="well">
			   <h3> Question 4 </h3>
				<h5> Question 4 goes here</h5>

					<select class="form-control" id=Q4>
					    <option id="placeholder" value="none">Select Rating </option>
					   	<option value=1>1 Strongly Disagree</option>
					    <option value=2>2</option>
					    <option value=3>3</option>
					    <option value=4>4</option>
					    <option value=5>5 Strongly Agree</option>
			
					</select>
			</div>
			<div class="well">
			   <h3> Question 5 </h3>
				<h5> Question 5 goes here</h5>

					<select class="form-control" id=Q5>
					    <option id="placeholder" value="none">Select Rating </option>
					    <option value=1>1 Strongly Disagree</option>
					    <option value=2>2</option>
					    <option value=3>3</option>
					    <option value=4>4</option>
					    <option value=5>5 Strongly Agree</option>
					</select>
			</div>
			<div class="well">
			   <h3> Question 6 </h3>
				<h5> Question 6 goes here</h5>

					<select class="form-control" id=Q6>
					    <option id="placeholder" value="none">Select Rating </option>
						<option value=1>1 Strongly Disagree</option>
					    <option value=2>2</option>
					    <option value=3>3</option>
					    <option value=4>4</option>
					    <option value=5>5 Strongly Agree</option>
			
					</select>
			</div>
			<div class="well">
			   <h3> Question 7 </h3>
				<h5> Question 7 goes here</h5>

					<select class="form-control" id=Q7>
					    <option id="placeholder" value="none">Select Rating </option>
					   	<option value=1>1 Strongly Disagree</option>
					    <option value=2>2</option>
					    <option value=3>3</option>
					    <option value=4>4</option>
					    <option value=5>5 Strongly Agree</option>
			
					</select>
			</div>
			<div class="well">
			   <h3> Question 8 </h3>
				<h5> Question 8 goes here</h5>

					<select class="form-control" id=Q8>
					    <option id="placeholder" value="none">Select Rating </option>
					    <option value=1>1 Strongly Disagree</option>
					    <option value=2>2</option>
					    <option value=3>3</option>
					    <option value=4>4</option>
					    <option value=5>5 Strongly Agree</option>
			
					</select>
			</div>
			<div class="well">
			   <h3> Question 9 </h3>
				<h5> Question goes here</h5>

					<select class="form-control" id=Q9>
					    <option id="placeholder" value="none">Select Rating </option>
					    <option value=1>1 Strongly Disagree</option>
					    <option value=2>2</option>
					    <option value=3>3</option>
					    <option value=4>4</option>
					    <option value=5>5 Strongly Agree</option>
			
					</select>
			</div>
			<div class="well">
			   <h3> Question 10 </h3>
				<h5> Question 10 goes here</h5>

					<select class="form-control" id=Q10>
					    <option id="placeholder" value="none">Select Rating </option>
					  	<option value=1>1 Strongly Disagree</option>
					    <option value=2>2</option>
					    <option value=3>3</option>
					    <option value=4>4</option>
					    <option value=5>5 Strongly Agree</option>
			
					</select>
			</div>


				<div class="btn-group">
					<button id="submitBTN" type="button" class="btn btn-info" data-toggle="modal" data-target="#myModal">Submit</button>
				 
				</div>

				<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
				  <div class="modal-dialog" role="document">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				        <h4 class="modal-title" id="myModalLabel">Your Celebrity Match!</h4>
				      </div>
				      <div class="modal-body" id="postAjax">
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				        <button type="button" class="btn btn-primary">Save changes</button>
				      </div>
				    </div>
	  		</div>
	</div>

			</div>
		</div>
		<br>

		<footer class="footer">
      		<div class="container">
	        	<p><a href="/api/friends">API friends Link</a> | <a href="https://github.com/amr08/FriendFinder">GitHub Repo</a></p>
      		</div>
    	</footer>

	<script> 

	var userInput = [];
	var currentURL = "";
	var answersArray = [];




	var obtainValue = function () {

		var name = $("#name").val();
		var photoID = $("#photoID").val();
		var Q1 = $("#Q1").val(); 
		var Q2 = $("#Q2").val();
		var Q3 = $("#Q3").val();
		var Q4 = $("#Q4").val();
		var Q5 = $("#Q5").val();
		var Q6 = $("#Q6").val();
		var Q7 = $("#Q7").val();
		var Q8 = $("#Q8").val();
		var Q9 = $("#Q9").val();
		var Q10 = $("#Q10").val();

		answersArray.push(parseInt(Q1))
 	answersArray.push(parseInt(Q2))
 	answersArray.push(parseInt(Q3))
 	answersArray.push(parseInt(Q4))
 	answersArray.push(parseInt(Q5))
 	answersArray.push(parseInt(Q6))
 	answersArray.push(parseInt(Q7))	
 	answersArray.push(parseInt(Q8))
 	answersArray.push(parseInt(Q9))
 	answersArray.push(parseInt(Q10))


		  userInput = {

			name: name,
			photo: photoID,
			scores: answersArray
	
		}
		
	};
	

// function compare () {

// }


	var runCelebrityMatch = function (){
		$("#postAjax").empty();
	

		$.ajax({url: currentURL + "/api/friends", method: "GET"}) 

			.done(function(friendsArray) {

				// // Here we are logging the URL so we have access to it for troubleshooting
				// console.log("------------------------------------");
				// console.log("URL: " + currentURL + "/api/friends");
				// console.log("------------------------------------");

		     

				for (var i=0; i<friendsArray.length; i++){

					console.log("------------------------------------")
					console.log(friendsArray[i].name);
					var scores = friendsArray[i].scores;
					

					

					for (var j = 0; j<scores.length;j++) {
						// console.log(friendsArray[j].scores[j])
						scores = scores[j]

					}

					for (var k = 0; j <answersArray.length; k++){
							console.log(scores[k])

						}
						
					var image = $("<img>");

					image.attr("src", friendsArray[1].photo);


				 }




				// console.log(userInput)
				// console.log(answersArray);
					$("#postAjax").append(friendsArray[1].name + "<br>")
						.append(image[0]);

				// var total = userInput.scores[0] + friendsArray[1].scores[0];
				// console.log(total)
			
});

  };

		$("#submitBTN").on("click", function(){
			obtainValue();
			console.log(userInput);

			currentURL = window.location.origin;
			console.log(currentURL)

			$.post(currentURL + '/api/friends', userInput, 
				function(data) {
					console.log(data)
					console.log("working in ajax")

				 //    $("#name").val("");
					// $("#photoID").val("");
					// $("#Q1").val(""); 
					// $("#Q2").val("");
					// $("#Q3").val("");
					// $("#Q4").val("");
					// $("#Q5").val("");
					// $("#Q6").val("");
					// $("#Q7").val("");
					// $("#Q8").val("");
					// $("#Q9").val("");
					// $("#Q10").val("");

				
			});

      		 runCelebrityMatch();
		});



	</script>

	</body>

</html>